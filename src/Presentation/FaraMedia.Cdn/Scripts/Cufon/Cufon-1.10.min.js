/*!
* Copyright (c) 2009 Simo Kinnunen.
* Licensed under the MIT license.
*
* @version 1.10
*/
var Cufon=function(){var v="fontFamily",g="",f=10,c=true,a=false,e=null,b=function(){return b.replace.apply(e,arguments)},j=b.DOM={ready:function(){var d=a,g={loaded:1,complete:1},e=[],b=function(){if(d)return;d=c;for(var a;a=e.shift();a());};if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,a);window.addEventListener("pageshow",b,a)}!window.opera&&document.readyState&&(function(){g[document.readyState]?b():setTimeout(arguments.callee,f)})();document.readyState&&document.createStyleSheet&&(function(){try{document.body.doScroll("left");b()}catch(a){setTimeout(arguments.callee,1)}})();h(window,"load",b);return function(a){if(!arguments.length)b();else d?a():e.push(a)}}(),root:function(){return document.documentElement||document.body},strict:function(){var b;if(document.compatMode=="BackCompat")return a;b=document.doctype;if(b)return!/frameset|transitional/i.test(b.publicId);b=document.firstChild;return b.nodeType!=8||/^DOCTYPE.+(transitional|frameset)/i.test(b.data)?a:c}()},d=b.CSS={Size:function(b,c){var a=this;a.value=parseFloat(b);a.unit=String(b).match(/[a-z%]*$/)[0]||"px";a.convert=function(a){return a/c*this.value};a.convertFrom=function(a){return a/this.value*c};a.toString=function(){return this.value+this.unit}},addClass:function(a,c){var b=a.className;a.className=b+(b&&" ")+c;return a},color:i(function(b){var a={};a.color=b.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(d,b,c){a.opacity=parseFloat(c);return"rgb("+b+")"});return a}),fontStretch:i(function(a){return typeof a=="number"?a:/%$/.test(a)?parseFloat(a)/100:({"ultra-condensed":.5,"extra-condensed":.625,condensed:.75,"semi-condensed":.875,"semi-expanded":1.125,expanded:1.25,"extra-expanded":1.5,"ultra-expanded":2})[a]||1}),getStyle:function(a){var b=document.defaultView;return b&&b.getComputedStyle?new t(b.getComputedStyle(a,e)):a.currentStyle?new t(a.currentStyle):new t(a.style)},gradient:i(function(a){for(var d={id:a,type:a.match(/^-([a-z]+)-gradient\(/)[1],stops:[]},e=a.substr(a.indexOf("(")).match(/([\d.]+=)?(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)/ig),b=0,f=e.length,c;b<f;++b){c=e[b].split("=",2).reverse();d.stops.push([c[1]||b/(f-1),c[0]])}return d}),quotedList:i(function(c){var b=[],d=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g,a;while(a=d.exec(c))b.push(a[3]||a[1]);return b}),recognizesMedia:i(function(e){var a=document.createElement("style"),c,b,d;a.type="text/css";a.media=e;try{a.appendChild(document.createTextNode("/**/"))}catch(f){}b=n("head")[0];b.insertBefore(a,b.firstChild);c=a.sheet||a.styleSheet;d=c&&!c.disabled;b.removeChild(a);return d}),removeClass:function(a,b){var c=RegExp("(?:^|\\s+)"+b+"(?=\\s|$)","g");a.className=a.className.replace(c,g);return a},supports:function(b,d){var c=document.createElement("span").style;if(c[b]===undefined)return a;c[b]=d;return c[b]===d},textAlign:function(a,d,b,c){if(d.get("textAlign")=="right"){if(b>0)a=" "+a}else if(b<c-1)a+=" ";return a},textShadow:i(function(f){if(f=="none")return e;var c=[],a={},b,d=0,g=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/ig;while(b=g.exec(f))if(b[0]==","){c.push(a);a={};d=0}else if(b[1])a.color=b[1];else a[(["offX","offY","blur"])[d++]]=b[2];c.push(a);return c}),textTransform:function(){var a={uppercase:function(a){return a.toUpperCase()},lowercase:function(a){return a.toLowerCase()},capitalize:function(a){return a.replace(/(?:^|\s)./g,function(a){return a.toUpperCase()})}};return function(c,d){var b=a[d.get("textTransform")];return b?b(c):c}}(),whiteSpace:function(){var c={inline:1,"inline-block":1,"run-in":1},a=/^\s+/,b=/\s+$/;return function(d,i,f,e,h){if(h)return d.replace(a,g).replace(b,g);if(e)if(e.nodeName.toLowerCase()=="br")d=d.replace(a,g);if(c[i.get("display")])return d;if(!f.previousSibling)d=d.replace(a,g);if(!f.nextSibling)d=d.replace(b,g);return d}}()};d.ready=function(){var e=!d.recognizesMedia("all"),b=a,i=[],m=function(){e=c;for(var a;a=i.shift();a());},p=n("link"),o=n("style"),l={"":1,"text/css":1};function g(a){return!l[a.type.toLowerCase()]?c:a.disabled||h(a.sheet,a.media||"screen")}function h(f,i){if(!d.recognizesMedia(i||"all"))return c;if(!f||f.disabled)return a;try{var e=f.cssRules,b;if(e)a:for(var g=0,j=e.length;b=e[g],g<j;++g)switch(b.type){case 2:break;case 3:if(!h(b.styleSheet,b.media.mediaText))return a;break;default:break a}}catch(k){}return c}function k(){if(document.createStyleSheet)return c;for(var b,d=0;b=p[d];++d)if(b.rel.toLowerCase()=="stylesheet"&&!g(b))return a;for(d=0;b=o[d];++d)if(!g(b))return a;return c}j.ready(function(){if(!b)b=d.getStyle(document.body).isUsable();if(e||b&&k())m();else setTimeout(arguments.callee,f)});return function(a){if(e)a();else i.push(a)}}();function Q(c){var a=this,b=a.face=c.face,d={" ":1," ":1," ":1};a.glyphs=function(b){var a,c={"-":"-","­":"-"};for(a in c){if(!k(c,a))continue;if(!b[a])b[a]=b[c[a]]}return b}(c.glyphs);a.w=c.w;a.baseSize=parseInt(b["units-per-em"],f);a.family=b["font-family"].toLowerCase();a.weight=b["font-weight"];a.style=b["font-style"]||"normal";a.viewBox=function(){var c=b.bbox.split(/\s+/),a={minX:parseInt(c[0],f),minY:parseInt(c[1],f),maxX:parseInt(c[2],f),maxY:parseInt(c[3],f)};a.width=a.maxX-a.minX;a.height=a.maxY-a.minY;a.toString=function(){var a=this;return[a.minX,a.minY,a.width,a.height].join(" ")};return a}();a.ascent=-parseInt(b.ascent,f);a.descent=-parseInt(b.descent,f);a.height=-a.ascent+a.descent;a.spacing=function(m,j,k){var l=this.glyphs,b,f,i,c=[],g=0,a,n=-1,h=-1,e;while(e=m[++n]){b=l[e]||this.missingGlyph;if(!b)continue;if(f){g-=i=f[e]||0;c[h]-=i}a=b.w;if(isNaN(a))a=+this.w;if(a>0){a+=j;if(d[e])a+=k}g+=c[++h]=~~a;f=b.k}c.total=g;return c}}function K(){var a={},b={oblique:"italic",italic:"oblique"};this.add=function(b){(a[b.style]||(a[b.style]={}))[b.weight]=b};this.get=function(m,c){var g=a[m]||a[b[m]]||a.normal||a.italic||a.oblique;if(!g)return e;c=({normal:400,bold:700})[c]||parseInt(c,f);if(g[c])return g[c];var l=({1:1,99:0})[c%100],j=[],i,h;if(l===undefined)l=c>400;if(c==500)c=400;for(var d in g){if(!k(g,d))continue;d=parseInt(d,f);if(!i||d<i)i=d;if(!h||d>h)h=d;j.push(d)}if(c<i)c=i;if(c>h)c=h;j.sort(function(a,b){return l?a>=c&&b>=c?a<b:a>b:a<=c&&b<=c?a>b:a<b?-1:1});return g[j[0]]}}function J(){var k="mouseleave",j="mouseout",i="mouseenter",g="mouseover";function m(b,c){try{return b.contains?b.contains(c):b.compareDocumentPosition(c)&16}catch(d){}return a}function e(b){var a=b.relatedTarget;if(a&&m(this,a))return;l(this,b.type==g)}function d(a){if(!a)a=window.event;l(a.target||a.srcElement,a.type==i)}function l(a,d){setTimeout(function(){var e=y.get(a).options;if(d){e=E(e,e.hover);e._mediatorMode=1}b.replace(a,e,c)},f)}this.attach=function(a){if(a.onmouseenter===undefined){h(a,g,e);h(a,j,e)}else{h(a,i,d);h(a,k,d)}};this.detach=function(a){if(a.onmouseenter===undefined){o(a,g,e);o(a,j,e)}else{o(a,i,d);o(a,k,d)}}}function I(){var a=[],d={};function e(f){for(var c=[],e,b=0;e=f[b];++b)c[b]=a[d[e]];return c}this.add=function(c,b){d[c]=a.push(b)-1};this.repeat=function(){for(var f=arguments.length?e(arguments):a,d,g=0;d=f[g++];)b.replace(d[0],d[1],c)}}function O(){var a={},c=0;function b(a){return a.cufid||(a.cufid=++c)}this.get=function(d){var c=b(d);return a[c]||(a[c]={})}}function t(e){var a=this,b={},c={};a.extend=function(c){for(var a in c)if(k(c,a))b[a]=c[a];return this};a.get=function(a){return b[a]!=undefined?b[a]:e[a]};a.getSize=function(a,b){return c[a]||(c[a]=new d.Size(this.get(a),b))};a.isUsable=function(){return!!e}}function h(b,d,c){if(b.addEventListener)b.addEventListener(d,c,a);else b.attachEvent&&b.attachEvent("on"+d,c)}function P(a,b){if(b._mediatorMode)return a;var d=y.get(a),c=d.options;if(c){if(c===b)return a;c.hover&&z.detach(a)}b.hover&&b.hoverables[a.nodeName.toLowerCase()]&&z.attach(a);d.options=b;return a}function i(b){var a={};return function(c){if(!k(a,c))a[c]=b.apply(e,arguments);return a[c]}}function M(g,b){for(var f=d.quotedList(b.get(v).toLowerCase()),a,c=0;a=f[c];++c)if(m[a])return m[a].get(b.get("fontStyle"),b.get("fontWeight"));return e}function n(a){return document.getElementsByTagName(a)}function k(b,a){return b.hasOwnProperty(a)}function E(){for(var d={},a,b,c=0,e=arguments.length;a=arguments[c],c<e;++c)for(b in a)if(k(a,b))d[b]=a[b];return d}function N(m,c,l,h,n,o){var f=document.createDocumentFragment(),e;if(c===g)return f;var k=h.separate,b=c.split(L[k]),j=k=="words";if(j&&F){/^\s/.test(c)&&b.unshift(g);/\s$/.test(c)&&b.push(g)}for(var a=0,i=b.length;a<i;++a){e=r[h.engine](m,j?d.textAlign(b[a],l,a,i):b[a],l,h,n,o,a<i-1);e&&f.appendChild(e)}return f}function o(b,d,c){if(b.removeEventListener)b.removeEventListener(d,c,a);else b.detachEvent&&b.detachEvent("on"+d,c)}function H(i,b){var x=i.nodeName.toLowerCase();if(b.ignore[x])return;if(b.ignoreClass&&b.ignoreClass.test(i.className))return;if(b.onBeforeReplace)b.onBeforeReplace(i,b);var y=!b.textless[x],z=b.trim==="simple",m=d.getStyle(P(i,b)).extend(b);if(parseFloat(m.get("fontSize"))===0)return;var p=M(i,m),f,q,l,j,k,u,o=b.softHyphens,w=a,t,n,A=/\u00ad/g,v=b.modifyText;if(!p)return;for(f=i.firstChild;f;f=l){q=f.nodeType;l=f.nextSibling;if(y&&q==3){if(o&&i.nodeName.toLowerCase()!=s){t=f.data.indexOf("­");if(t>=0){f.splitText(t);l=f.nextSibling;l.deleteData(0,1);n=document.createElement(s);n.appendChild(document.createTextNode("­"));i.insertBefore(n,l);l=n;w=c}}if(j){j.appendData(f.data);i.removeChild(f)}else j=f;if(l)continue}if(j){k=j.data;if(!o)k=k.replace(A,g);k=d.whiteSpace(k,m,j,u,z);if(v)k=v(k,j,i,b);i.replaceChild(N(p,k,m,b,f,i),j);j=e}if(q==1){if(f.firstChild)if(f.nodeName.toLowerCase()=="cufon")r[b.engine](p,e,m,b,f,i);else arguments.callee(f,b);u=f}}if(o&&w){C(i);!B&&h(window,"resize",G);B=c}if(b.onAfterReplace)b.onAfterReplace(i,b)}function C(j){var i,b,d,a,c,f,h,e;i=j.getElementsByTagName(s);for(e=0;b=i[e];++e){b.className=w;a=d=b.parentNode;if(a.nodeName.toLowerCase()!=l){c=document.createElement(l);c.appendChild(b.previousSibling);d.insertBefore(c,b);c.appendChild(b)}else{a=a.parentNode;if(a.nodeName.toLowerCase()==l){d=a.parentNode;while(a.firstChild)d.insertBefore(a.firstChild,a);d.removeChild(a)}}}for(e=0;b=i[e];++e){b.className=g;a=b.parentNode;d=a.parentNode;f=a.nextSibling||d.nextSibling;h=f.nodeName.toLowerCase()==l?a:b.previousSibling;if(h.offsetTop>=f.offsetTop){b.className=w;if(h.offsetTop<f.offsetTop){c=document.createElement(l);d.insertBefore(c,a);c.appendChild(a);c.appendChild(f)}}}}function G(){if(q)return;d.addClass(j.root(),u);clearTimeout(D);D=setTimeout(function(){q=c;d.removeClass(j.root(),u);C(document);q=a},100)}var F=" ".split(/\s+/).length==0,l="cufonglue",s="cufonshy",w="cufon-shy-disabled",u="cufon-viewport-resizing",y=new O,z=new J,p=new I,A=a,B=a,D,q=a,r={},m={},x={autoDetect:a,engine:e,forceHitArea:a,hover:a,hoverables:{a:c},ignore:{applet:1,canvas:1,col:1,colgroup:1,head:1,iframe:1,map:1,noscript:1,optgroup:1,option:1,script:1,select:1,style:1,textarea:1,title:1,pre:1},ignoreClass:e,modifyText:e,onAfterReplace:e,onBeforeReplace:e,printable:c,selector:window.Sizzle||window.jQuery&&function(a){return jQuery(a)}||window.dojo&&dojo.query||window.glow&&glow.dom&&glow.dom.get||window.Ext&&Ext.query||window.YAHOO&&YAHOO.util&&YAHOO.util.Selector&&YAHOO.util.Selector.query||window.$$&&function(a){return $$(a)}||window.$&&function(a){return $(a)}||document.querySelectorAll&&function(a){return document.querySelectorAll(a)}||n,separate:"words",softHyphens:c,textless:{dl:1,html:1,ol:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,ul:1},textShadow:"none",trim:"advanced"},L={words:/\s/.test(" ")?/[^\S\u00a0]+/:/\s+/,characters:g,none:/^/};b.now=function(){j.ready();return b};b.refresh=function(){p.repeat.apply(p,arguments);return b};b.registerEngine=function(c,a){if(!a)return b;r[c]=a;return b.set("engine",c)};b.registerFont=function(c){if(!c)return b;var d=new Q(c),a=d.family;if(!m[a])m[a]=new K;m[a].add(d);return b.set(v,'"'+a+'"')};b.replace=function(e,a,g){var f="string";a=E(x,a);if(!a.engine)return b;if(!A){d.addClass(j.root(),"cufon-active cufon-loading");d.ready(function(){d.addClass(d.removeClass(j.root(),"cufon-loading"),"cufon-ready")});A=c}if(a.hover)a.forceHitArea=c;if(a.autoDetect)delete a.fontFamily;if(typeof a.ignoreClass==f)a.ignoreClass=new RegExp("(?:^|\\s)(?:"+a.ignoreClass.replace(/\s+/g,"|")+")(?:\\s|$)");if(typeof a.textShadow==f)a.textShadow=d.textShadow(a.textShadow);if(typeof a.color==f&&/^-/.test(a.color))a.textGradient=d.gradient(a.color);else delete a.textGradient;if(typeof e==f){!g&&p.add(e,arguments);e=[e]}else if(e.nodeType)e=[e];d.ready(function(){for(var g=0,h=e.length;g<h;++g){var d=e[g];if(typeof d==f)b.replace(a.selector(d),a,c);else H(d,a)}});return b};b.set=function(a,c){x[a]=c;return b};return b}();Cufon.registerEngine("vml",function(){var i="cvml:fill",c="cvml:shape",a=null,f=document.namespaces;if(!f)return;f.add("cvml","urn:schemas-microsoft-com:vml");f=a;var d=document.createElement(c);d.style.behavior="url(#default#VML)";if(!d.coordsize)return;d=a;var g=(document.documentMode||0)<8;document.write(('<style type="text/css">cufoncanvas{text-indent:0;}@media screen{cvml\\:shape,cvml\\:rect,cvml\\:fill,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute;}cufoncanvas{position:absolute;text-align:left;}cufon{display:inline-block;position:relative;vertical-align:'+(g?"middle":"text-bottom")+";}cufon cufontext{position:absolute;left:-10000in;font-size:1px;text-align:left;}cufonshy.cufon-shy-disabled,.cufon-viewport-resizing cufonshy{display:none;}cufonglue{white-space:nowrap;display:inline-block;}.cufon-viewport-resizing cufonglue{white-space:normal;}a cufon{cursor:pointer}}@media print{cufon cufoncanvas{display:none;}}</style>").replace(/;/g,"!important;"));function j(c,a){return b(c,/(?:em|ex|%)$|^[a-z-]+$/i.test(a)?"1em":a)}function b(a,b){if(!isNaN(b)||/px$/i.test(b))return parseFloat(b);var e=a.style.left,c=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b.replace("%","em");var d=a.style.pixelLeft;a.style.left=e;a.runtimeStyle.left=c;return d}function h(g,c,f,d){var e="computed"+d,a=c[e];if(isNaN(a)){a=c.get(d);c[e]=a=a=="normal"?0:~~f.convertFrom(b(g,a))}return a}var e={};function k(f){var d=f.id;if(!e[d]){var b=f.stops,a=document.createElement(i),g=[];a.type="gradient";a.angle=180;a.focus="0";a.method="none";a.color=b[0][1];for(var c=1,h=b.length-1;c<h;++c)g.push(b[c][0]*100+"% "+b[c][1]);a.colors=g.join(",");a.color2=b[h][1];e[d]=a}return e[d]}return function(p,w,e,r,L,B,db){var x="px",G=w===a;if(G)w=L.alt;var s=p.viewBox,o=e.computedFontSize||(e.computedFontSize=new Cufon.CSS.Size(j(B,e.get("fontSize"))+x,p.baseSize)),f,m;if(G){f=L;m=L.firstChild}else{f=document.createElement("cufon");f.className="cufon cufon-vml";f.alt=w;m=document.createElement("cufoncanvas");f.appendChild(m);if(r.printable){var V=document.createElement("cufontext");V.appendChild(document.createTextNode(w));f.appendChild(V)}!db&&f.appendChild(document.createElement(c))}var u=f.style,F=m.style,T=o.convert(s.height),y=Math.ceil(T),bb=y/T,N=bb*Cufon.CSS.fontStretch(e.get("fontStretch")),K=s.minX,Y=s.minY;F.height=y;F.top=Math.round(o.convert(Y-p.ascent));F.left=Math.round(o.convert(K));u.height=o.convert(p.height)+x;var gb=e.get("color"),I=Cufon.CSS.textTransform(w,e).split(""),v=p.spacing(I,h(B,e,o,"letterSpacing"),h(B,e,o,"wordSpacing"));if(!v.length)return a;var W=v.total,Q=-K+W+(s.width-v[v.length-1]),cb=o.convert(Q*N),M=Math.round(cb),P=Q+","+s.height,O,eb="r"+P+"ns",X=r.textGradient&&k(r.textGradient),fb=p.glyphs,R=0,E=r.textShadow,Z=-1,ab=0,hb;while(hb=I[++Z]){var J=fb[I[Z]]||p.missingGlyph,d;if(!J)continue;if(G){d=m.childNodes[ab];while(d.firstChild)d.removeChild(d.firstChild)}else{d=document.createElement(c);m.appendChild(d)}d.stroked="f";d.coordsize=P;d.coordorigin=O=K-R+","+Y;d.path=(J.d?"m"+J.d+"xe":"")+"m"+O+eb;d.fillcolor=gb;X&&d.appendChild(X.cloneNode(false));var U=d.style;U.width=M;U.height=y;if(E){var D=E[0],z=E[1],S=Cufon.CSS.color(D.color),A,n=document.createElement("cvml:shadow");n.on="t";n.color=S.color;n.offset=D.offX+","+D.offY;if(z){A=Cufon.CSS.color(z.color);n.type="double";n.color2=A.color;n.offset2=z.offX+","+z.offY}n.opacity=S.opacity||A&&A.opacity||1;d.appendChild(n)}R+=v[ab++]}var l=d.nextSibling,C,H;if(r.forceHitArea){if(!l){l=document.createElement("cvml:rect");l.stroked="f";l.className="cufon-vml-cover";C=document.createElement(i);C.opacity=0;l.appendChild(C);m.appendChild(l)}H=l.style;H.width=M;H.height=y}else l&&m.removeChild(l);u.width=Math.max(Math.ceil(o.convert(W*N)),0);if(g){var t=e.computedYAdjust;if(t===undefined){var q=e.get("lineHeight");if(q=="normal")q="1em";else if(!isNaN(q))q+="em";e.computedYAdjust=t=.5*(b(B,q)-parseFloat(u.height))}if(t){u.marginTop=Math.ceil(t)+x;u.marginBottom=t+x}}return f}}());Cufon.registerEngine("canvas",function(){var a=document.createElement("canvas");if(!a||!a.getContext||!a.getContext.apply)return;a=null;var b=Cufon.CSS.supports("display","inline-block"),d=!b&&(document.compatMode=="BackCompat"||/frameset|transitional/i.test(document.doctype.publicId)),c=document.createElement("style");c.type="text/css";c.appendChild(document.createTextNode(("cufon{text-indent:0;}@media screen,projection{cufon{display:inline;display:inline-block;position:relative;vertical-align:middle;"+(d?"":"font-size:1px;line-height:1px;")+"}cufon cufontext{display:-moz-inline-box;display:inline-block;width:0;height:0;text-align:left;text-indent:-10000in;}"+(b?"cufon canvas{position:relative;}":"cufon canvas{position:absolute;}")+"cufonshy.cufon-shy-disabled,.cufon-viewport-resizing cufonshy{display:none;}cufonglue{white-space:nowrap;display:inline-block;}.cufon-viewport-resizing cufonglue{white-space:normal;}}@media print{cufon{padding:0;}cufon canvas{display:none;}}").replace(/;/g,"!important;")));document.getElementsByTagName("head")[0].appendChild(c);function e(h,g){var d=0,e=0,b=[],i=/([mrvxe])([^a-z]*)/g,f;a:for(var c=0;f=i.exec(h);++c){var a=f[2].split(",");switch(f[1]){case"v":b[c]={m:"bezierCurveTo",a:[d+~~a[0],e+~~a[1],d+~~a[2],e+~~a[3],d+=~~a[4],e+=~~a[5]]};break;case"r":b[c]={m:"lineTo",a:[d+=~~a[0],e+=~~a[1]]};break;case"m":b[c]={m:"moveTo",a:[d=~~a[0],e=~~a[1]]};break;case"x":b[c]={m:"closePath"};break;case"e":break a}g[b[c].m].apply(g,b[c].a)}return b}function f(c,b){for(var a=0,e=c.length;a<e;++a){var d=c[a];b[d.m].apply(b,d.a)}}return function(j,r,o,A,F){var k="px",N=r===null;if(N)r=F.getAttribute("alt");var h=j.viewBox,c=o.getSize("fontSize",j.baseSize),m=0,u=0,y=0,l=0,n=A.textShadow,I=[];if(n)for(var g=n.length;g--;){var C=n[g],s=c.convertFrom(parseFloat(C.offX)),t=c.convertFrom(parseFloat(C.offY));I[g]=[s,t];if(t<m)m=t;if(s>u)u=s;if(t>y)y=t;if(s<l)l=s}var D=Cufon.CSS.textTransform(r,o).split(""),q=j.spacing(D,~~c.convertFrom(parseFloat(o.get("letterSpacing"))||0),~~c.convertFrom(parseFloat(o.get("wordSpacing"))||0));if(!q.length)return null;var S=q.total;u+=h.width-q[q.length-1];l+=h.minX;var i,d;if(N){i=F;d=F.firstChild}else{i=document.createElement("cufon");i.className="cufon cufon-canvas";i.setAttribute("alt",r);d=document.createElement("canvas");i.appendChild(d);if(A.printable){var O=document.createElement("cufontext");O.appendChild(document.createTextNode(r));i.appendChild(O)}}var w=i.style,v=d.style,B=c.convert(h.height),R=Math.ceil(B),G=R/B,J=G*Cufon.CSS.fontStretch(o.get("fontStretch")),H=S*J,z=Math.ceil(c.convert(H+u-l)),x=Math.ceil(c.convert(h.height-m+y));d.width=z;d.height=x;v.width=z+k;v.height=x+k;m+=h.minY;v.top=Math.round(c.convert(m-j.ascent))+k;v.left=Math.round(c.convert(l))+k;var K=Math.max(Math.ceil(c.convert(H)),0)+k;if(b){w.width=K;w.height=c.convert(j.height)+k}else{w.paddingLeft=K;w.paddingBottom=c.convert(j.height)-1+k}var a=d.getContext("2d"),P=B/h.height,p=window.devicePixelRatio||1;if(p!=1){d.width=z*p;d.height=x*p;a.scale(p,p)}a.scale(P,P*G);a.translate(-l,-m);a.save();function L(){var d=j.glyphs,b,c=-1,h=-1,g;a.scale(J,1);while(g=D[++c]){var b=d[D[c]]||j.missingGlyph;if(!b)continue;if(b.d){a.beginPath();a.moveTo(0,0);if(b.code)f(b.code,a);else b.code=e("m"+b.d,a);a.fill()}a.translate(q[++h],0)}a.restore()}if(n)for(var g=n.length;g--;){var C=n[g];a.save();a.fillStyle=C.color;a.translate.apply(a,I[g]);L()}var M=A.textGradient;if(M){for(var Q=M.stops,E=a.createLinearGradient(0,h.minY,0,h.maxY),g=0,T=Q.length;g<T;++g)E.addColorStop.apply(E,Q[g]);a.fillStyle=E}else a.fillStyle=o.get("color");L();return i}}());